# Rotational Unfolding - Phase 1 Python CLI

## Overview

This is the Phase 1 Python CLI for the rotational unfolding algorithm.
It provides a cwd-independent entry point that invokes the C++ core
as a subprocess and manages experiment metadata.

これは回転展開アルゴリズムの Phase 1 Python CLI です。
cwd 非依存の入口を提供し、C++ コアをサブプロセスとして呼び出し、
実験メタデータを管理します。

## Installation

```bash
cd reorg/python
pip install -e .
```

## Usage

### Basic usage

```bash
# Run rotational unfolding for archimedean/s05
python -m rotational_unfolding run --poly archimedean/s05 --out outputs/

# Run with explicit symmetry mode
python -m rotational_unfolding run --poly archimedean/s01 --out outputs/ --symmetric on
```

### CLI Arguments

- `run`: Subcommand to run rotational unfolding
- `--poly CLASS/NAME`: Polyhedron identifier (e.g., `archimedean/s05`)
- `--out OUTPUT_DIR`: Output directory (e.g., `outputs/`)
- `--symmetric auto|on|off`: Symmetry mode (default: `auto`)

### Output Structure

```
outputs/
└── <experiment-id>/
    ├── raw.jsonl          # Raw partial unfoldings (generated by C++)
    └── run.json           # Experiment metadata (generated by Python)
```

### Experiment ID Format

```
YYYY-MM-DDTHHMMSSZ_<poly_name>
```

Example: `2026-02-06T203012Z_s05`

## Examples

### Run archimedean/s05

```bash
python -m rotational_unfolding run --poly archimedean/s05 --out outputs/
```

Output:
```
Starting rotational unfolding for: archimedean/s05
Symmetry mode: auto

Repository root: /Users/tshiota/Github/RotationalUnfolding
Polyhedron: /Users/tshiota/Github/RotationalUnfolding/reorg/data/polyhedra/archimedean/s05/polyhedron.json
Root pairs: /Users/tshiota/Github/RotationalUnfolding/reorg/data/polyhedra/archimedean/s05/root_pairs.json
C++ binary: /Users/tshiota/Github/RotationalUnfolding/reorg/cpp/rotunfold

Experiment directory: /Users/tshiota/Github/RotationalUnfolding/outputs/2026-02-06T203012Z_s05
Invoking C++ binary...

Info: Polyhedron name: s05
Info: Symmetric mode (auto): on
Info: Writing output to: .../raw.jsonl
Info: Processing 3 root pairs...
Info: Done. Processed 3 root pairs.

C++ process exited with code: 0
Records written: 6
Generating run.json...
run.json written: .../run.json

Done.
```

### Run platonic/r01

```bash
python -m rotational_unfolding run --poly platonic/r01 --out outputs/
```

## Requirements

- Python 3.8+
- C++ binary (`reorg/cpp/rotunfold`) must be built
- Polyhedron data in `reorg/data/polyhedra/`

## Notes

- The CLI is cwd-independent and can be run from any directory
- All paths are resolved relative to the repository root
- The C++ binary is invoked as a subprocess
- `run.json` is generated after the C++ process completes
- Experiment directories are created with unique IDs to prevent overwrites
